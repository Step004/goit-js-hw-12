{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["// У файлі pixabay-api.js зберігай функції для HTTP-запитів.\nimport axios from 'axios';\nconst KEY = '42496728-577636fc2b585ecd9d4373a90';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport async function getImages(inputValue, page) {\n    const LINK = `${BASE_URL}?key=${KEY}&q=${inputValue}&per_page=15&page=${page}`;\n\n    const response = await axios.get(LINK);\n    return response.data;\n}","// У файлі render-functions.js створи функції для відображення елементів інтерфейсу.\n\nimport iziToast from 'izitoast';\n\nexport function renderImages(images, list) {\n  if (images.length === 0) {\n    iziToast.error({\n      title: '',\n      message:\n        'Sorry, there are no images matching your search query. Please, try again!',\n      position: 'topRight',\n    });\n      return;\n  }\n  const markup = images\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => {\n        return `<li class=\"gallery-item\">\n                    <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\" />\n                    </a>\n                    <div class=\"parameters\">\n                        <div class=\"params\">\n                            <p class=\"options\">Likes</p>\n                            <p class=\"quantity\">${likes}</p>\n                        </div>\n                        <div class=\"params\">\n                            <p class=\"options\">Views</p>\n                            <p class=\"quantity\">${views}</p>\n                        </div>\n                        <div class=\"params\">\n                            <p class=\"options\">Comments</p>\n                            <p class=\"quantity\">${comments}</p>\n                        </div>\n                        <div class=\"params\">\n                            <p class=\"options\">Downloads</p>\n                            <p class=\"quantity\">${downloads}</p>\n                        </div>\n                    </div>\n                </li>`;\n      }\n    )\n    .join('');\n  list.insertAdjacentHTML('beforeend', markup);\n}\n\nexport function clearList(list, gallery) {\n  list.innerHTML = '';\n  if (gallery) {\n    gallery.refresh();\n  }\n}\n","// main.js\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { getImages } from './js/pixabay-api';\nimport { renderImages } from './js/render-functions';\nimport { clearList } from './js/render-functions';\n\nconst input = document.querySelector('.input');\nconst list = document.querySelector('.gallery');\nconst form = document.querySelector('.form');\nconst loader = document.querySelector('.loader');\nconst buttonLoad = document.querySelector('.button-load');\nconst loaderEnd = document.querySelector('.loader-down');\nlet gallery;\nlet page;\nlet current_value;\n\n\n\nfunction getPhoto(event) {\n  event.preventDefault();\n  loader.style.display = 'block';\n  current_value = input.value;\n\n  page = 1;\n  clearList(list, gallery);\n\n  getImages(current_value, page)\n    .then(data => {\n      const images = data.hits;\n\n      renderImages(images, list);\n\n      loader.style.display = 'none';\n      input.value = '';\n      buttonLoad.style.display = 'block';\n\n      gallery = new SimpleLightbox('.gallery a', {\n        background: 'rgba(46, 47, 66, 0.8)',\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n\n      gallery.on('error.simplelightbox', function (e) {\n        console.log(e);\n      });\n    })\n    .catch(() => {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there was an error while fetching images. Please, try again later!',\n        position: 'topRight',\n      });\n    });\n}\n\nconst img = '';\nconst options = '';\n\nfunction getMorePhoto(event) {\n  event.preventDefault();\n  page += 1;\n\n  buttonLoad.style.display = 'none';\n  loaderEnd.style.display = 'block';\n\n  getImages(current_value, page)\n    .then(data => {\n      const images = data.hits;\n      let number_img = data.totalHits; \n      let number_pages = number_img / 15;\n      if (number_pages < page) {\n        buttonLoad.style.display = 'none';\n        loaderEnd.style.display = 'none';\n        iziToast.info({\n          title: '',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'bottomRight',\n        });\n        return;\n      }\n      renderImages(images, list);\n      \n      buttonLoad.style.display = 'block';\n      loaderEnd.style.display = 'none';\n      \n      const img = list.lastElementChild;\n      const options = img.getBoundingClientRect();\n      window.scrollBy({top: options.height*2, behavior: \"smooth\",});\n\n      gallery = new SimpleLightbox('.gallery a', {\n        background: 'rgba(46, 47, 66, 0.8)',\n        captionDelay: 250,\n        captionsData: 'alt',\n      });\n\n      gallery.on('error.simplelightbox', function (e) {\n        console.log(e);\n      });\n    })\n    .catch(() => {\n      iziToast.error({\n        title: '',\n        message:\n          'Sorry, there was an error while fetching images. Please, try again later!',\n        position: 'topRight',\n      });\n    });\n}\n\nform.addEventListener('submit', getPhoto);\nbuttonLoad.addEventListener('click', getMorePhoto);"],"names":["KEY","BASE_URL","getImages","inputValue","page","LINK","axios","renderImages","images","list","iziToast","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearList","gallery","input","form","loader","buttonLoad","loaderEnd","current_value","getPhoto","event","data","SimpleLightbox","e","getMorePhoto","options"],"mappings":"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"}